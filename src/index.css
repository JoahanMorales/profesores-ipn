@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Estilos base para modo oscuro */
  body {
    @apply bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100;
  }

  /* Fix crítico para viewport en móviles - prevenir desaparición de contenido al abrir teclado */
  html {
    height: 100%;
    /* Usar fill-available para iOS Safari */
    height: -webkit-fill-available;
    /* Prevenir zoom en inputs en iOS */
    -webkit-text-size-adjust: 100%;
  }
  
  body {
    min-height: 100%;
    min-height: -webkit-fill-available;
    position: relative;
    overflow-x: hidden;
    overflow-y: auto;
    /* Prevenir bounce effect en iOS */
    overscroll-behavior-y: none;
    /* Mejorar rendimiento de scroll */
    -webkit-overflow-scrolling: touch;
  }

  /* Asegurar que el contenido principal use toda la altura disponible */
  #root {
    min-height: 100vh;
    min-height: -webkit-fill-available;
    display: flex;
    flex-direction: column;
    position: relative;
  }

  /* Soporte para diferentes unidades de viewport modernas */
  @supports (min-height: 100dvh) {
    #root {
      min-height: 100dvh;
    }
  }

  /* Asegurar que inputs y textareas no causen zoom en móviles */
  input, textarea, select {
    font-size: 16px;
  }

  /* Prevenir comportamientos extraños en elementos con position fixed */
  @media (max-width: 768px) {
    .fixed {
      position: absolute;
    }
  }

  /* Scrollbar personalizado */
  ::-webkit-scrollbar {
    width: 12px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-gray-100 dark:bg-gray-800;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 rounded-lg;
  }
}

@layer utilities {
  /* Animación de fade in */
  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  .animate-fade-in {
    animation: fade-in 0.3s ease-out;
  }

  /* Animación de monedas flotando */
  @keyframes coin-float {
    0% {
      transform: translate(-50%, -50%) translate(0, 0) scale(0);
      opacity: 0;
    }
    20% {
      opacity: 1;
      transform: translate(-50%, -50%) translate(var(--coin-x), var(--coin-y)) scale(1);
    }
    80% {
      opacity: 1;
    }
    100% {
      transform: translate(-50%, -50%) translate(var(--coin-x), calc(var(--coin-y) + 200px)) scale(0.5);
      opacity: 0;
    }
  }
  .animate-coin-float {
    animation: coin-float 2s ease-out forwards;
  }

  /* Animación de rotación de moneda */
  @keyframes coin-spin {
    0%, 100% { transform: rotateY(0deg); }
    50% { transform: rotateY(180deg); }
  }
  .animate-coin-spin {
    animation: coin-spin 1s ease-in-out infinite;
  }

  /* Animación de shimmer/brillo arcoíris */
  @keyframes shimmer {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(100%);
    }
  }
  .animate-shimmer {
    animation: shimmer 1.5s infinite;
  }

  /* Animación de escala con rebote */
  @keyframes scale-bounce {
    0% {
      transform: scale(0);
      opacity: 0;
    }
    50% {
      transform: scale(1.1);
    }
    70% {
      transform: scale(0.9);
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }
  .animate-scale-bounce {
    animation: scale-bounce 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  /* Animación de partículas brillantes */
  @keyframes sparkle {
    0% {
      transform: translate(-50%, -50%) translate(0, 0) scale(1);
      opacity: 1;
    }
    100% {
      transform: translate(-50%, -50%) translate(var(--sparkle-x), var(--sparkle-y)) scale(0);
      opacity: 0;
    }
  }
  .animate-sparkle {
    animation: sparkle 1.5s ease-out forwards;
  }

  /* Animación de fade in desde arriba */
  @keyframes fade-in-down {
    0% {
      opacity: 0;
      transform: translateY(-20px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .animate-fade-in-down {
    animation: fade-in-down 0.3s ease-out;
  }
}

